<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/GLTFLoader.js"></script>
</head>
<body>
    <header>
        Hello world
    </header>
    
    <main>
        <div id="main_div"></div>
    </main>

    <script>
        // Créer la scène
        const scene = new THREE.Scene();

        // Créer la caméra
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);

        // Créer le rendu
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Créer un cube représentant le personnage
        const geometry = new THREE.BoxGeometry();
        const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
        const cube = new THREE.Mesh(geometry, material);
        cube.position.set(0, 1, -5);
        scene.add(cube);

        // Charger le modèle glTF en utilisant un proxy CORS
        const loader = new THREE.GLTFLoader();
        loader.load(
            'https://crossorigin.me/https://sabrito84.github.io/model/cube.glb',
            function (gltf) {
                // Une fois chargé, récupérez le mesh du modèle
                const model = gltf.scene;

                // Positionnez le modèle comme vous le souhaitez
                model.position.set(0, 1, -3); // Par exemple, positionné devant le cube

                // Ajoutez le modèle à la scène
                scene.add(model);

                // Supprimez le cube blanc de la scène si nécessaire
                scene.remove(cube);
            },
            undefined,
            function (error) {
                console.error('Erreur lors du chargement du modèle 3D', error);
            }
        );

        // Ajouter un sol
        const groundGeometry = new THREE.PlaneGeometry(2000, 2000);
        const groundMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff, side: THREE.DoubleSide });

        const ground = new THREE.Mesh(groundGeometry, groundMaterial);
        ground.rotation.x = -Math.PI / 2; // Pour le placer au niveau du sol
        scene.add(ground);

        // Ajouter une lumière ambiante
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5); // couleur, intensité
        scene.add(ambientLight);

        // Ajouter une lumière directionnelle
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5); // couleur, intensité
        directionalLight.position.set(0, 1, 0); // position de la lumière
        scene.add(directionalLight);

        // Contrôler la rotation de la caméra avec la souris
        document.addEventListener('mousemove', (event) => {
            const mouseX = (event.clientX / window.innerWidth) * 2 - 1;
            const mouseY = -(event.clientY / window.innerHeight) * 2 + 1;

            camera.rotation.y = mouseX * 2;
            camera.rotation.x = mouseY * 2;
            camera.position.set(0, 1, 0);
        });

        // Boucle de rendu
        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }
        animate();

        // Redimensionner le rendu lorsque la fenêtre est redimensionnée
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
